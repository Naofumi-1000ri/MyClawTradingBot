{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["ooda", "action_type", "signals", "market_summary"],
  "properties": {
    "ooda": {
      "type": "object",
      "required": ["observe", "orient", "decide"],
      "properties": {
        "observe": {"type": "string"},
        "orient": {"type": "string"},
        "decide": {"type": "string"}
      }
    },
    "action_type": {
      "type": "string",
      "enum": ["trade", "hold", "adjust_strategy", "journal", "research", "self_improve"]
    },
    "signals": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["symbol", "action", "confidence", "reasoning"],
        "properties": {
          "symbol": {"type": "string"},
          "action": {"type": "string", "enum": ["long", "short", "close", "hold"]},
          "confidence": {"type": "number", "minimum": 0, "maximum": 1},
          "entry_price": {"type": ["number", "null"]},
          "stop_loss": {"type": ["number", "null"]},
          "take_profit": {"type": ["number", "null"]},
          "leverage": {"type": "integer", "minimum": 1, "maximum": 10},
          "reasoning": {"type": "string"}
        }
      }
    },
    "strategy_update": {
      "type": ["object", "null"],
      "properties": {
        "description": {"type": "string"},
        "changes": {"type": "object"}
      }
    },
    "journal_entry": {"type": ["string", "null"]},
    "research_topic": {"type": ["string", "null"]},
    "self_improve_task": {"type": ["string", "null"]},
    "market_summary": {"type": "string"},
    "self_assessment": {"type": ["string", "null"]}
  }
}
